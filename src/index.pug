doctype html
html(lang="en")
    head
        meta(charset="utf-8")
        title=site.title
        meta(name="description", content=meta.description)
        meta(property="og:title" content=meta.title)
        meta(property="og:description" content=meta.description)
        meta(property="og:url" content=meta.url)
        meta(property="og:image" content=meta.image)
        meta(name="twitter:card" content="summary_large_image")
        meta(name="viewport", content="width=device-width")
        meta(name="theme-color" content="")
        link(rel="stylesheet", href="./style/main.pcss")
        link(rel="shortcut icon" href="/media/ico-favicon.png" type="image/x-icon")
        //- link(rel="preload" href="" as="")
        script(defer src="./script/main.js")
        script(defer src="https://identity.netlify.com/v1/netlify-identity-widget.js")

    body(class="text-base" style="min-width: 375px;")
        div(class="mx-auto" style="max-width: 1920px")

            //- Header
            header(id="header-main" class="bg-cover bg-vectors-teal lg:bg-header-main lg:bg-imgcover lg:border-b-16 border-teal")
                //- Mobile cover image
                div(class="aspect ratio-1-2 bg-header-main p-6 bg-imgcover lg:hidden")
                    img(src="/media/logo-eitrmacademy.svg" alt="EIT RawMaterials Academy" class="w-1/2 mt-6")
                //- Main Hero
                div(class='max-w-6xl mx-auto p-6 lg:p-4 pb-16 lg:flex lg:justify-between')
                    img(src="/media/logo-eitrmacademy.svg" alt="EIT RawMaterials Academy" class="hidden lg:block max-w-lg self-start")
                    div(class="lg:w-2/3 self-end mt-16 lg:mt-32 lg:pt-32 lg:pr-12")
                        div(id="cta")
                            h1(class="text-white text-5xl leading-16 mb-1 font-bold")= header.title
                            div(class="text-white text-4xl leading-16 mb-8")= header.subtitle
                            for btn in header.cta
                                a(class="button button-white icon-arrow-right lg:button-teal mr-6 mb-4" href=btn.href target=btn.target ? btn.target : '')= btn.text

            //- main section
            main(class="")

                //- About Lightweight Professional Course
                section(id="about" class="px-4 py-24")
                    div(class="max-w-6xl mx-auto")
                        h2(class="mb-2 text-2xl leading-10 lg:text-3xl lg:leading-12 text-blue overline overline-blue")= about.title
                        p(class="mb-6 text-teal text-lg leading-8 lg:text-xl lg:leading-11")= about.intro
                        p(class="")= about.body
                            
                //- Questions
                section(id="questions")
                    each question, i in questions
                        div(class="lg:grid grid-cols-2")
                            - let colStart = i&1 ? 2 : 1
                            div(style="min-height: 20rem; background-image: url("+question.image+")" class="bg-cover bg-top col-span-1 row-span-1 row-start-1 col-start-"+colStart)
                            - colStart = i&1 ? 1 : 2
                            div(class="text-white bg-teal bg-vectors-teal bg-imgcover col-span-1 row-span-1 px-6 py-24 lg:px-24 xl:p-32 row-start-1 col-start-"+colStart)
                                h3(class="font-bold text-3xl leading-12 overline overline-white mb-8")= question.q
                                p= question.a

                section(id="course" class="px-4 py-24")
                    //- Lightweight Professional at a glance
                    div(id="at-a-glance" class="max-w-6xl mx-auto")
                        h2(class="text-3xl leading-12 text-blue overline overline-blue mb-12")= at_a_glance.title
                        div(class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 corner-base mb-4")
                            each item in at_a_glance.properties
                                div.bg-vectors-teal-light.bg-cover
                                    div
                                        img(src=item.image alt="" class="mx-auto")
                                    div(class="text-center font-bold text-blue uppercase text-lg px-4 leading-8 mb-10") !{item.title}
                        div.text-sm !{at_a_glance.footnote}

                    //- Course overview
                    div(id="overview" class="mt-12 pt-24 pb-16 max-w-6xl mx-auto")
                        h2(class="text-3xl leading-12 text-blue overline overline-blue mb-2")= overview.title
                        p(class="intro text-xl leading-11 mb-12")= overview.intro
                        ul.overview-table
                            each prop in overview.properties
                                li(class="md:grid grid-cols-3 border-top-blue py-6")
                                    div(class="font-bold col-span-1 col-start-1")= prop.term
                                    if prop.deed
                                        div(class="col-span-2 col-start-2")= prop.deed
                                    if prop.list
                                        div(class="col-span-3 col-start-1 row-start-2")
                                            ul(class="mt-4 mb-3 md:grid grid-cols-3 gap-4")
                                                each item in prop.list
                                                    li(class="bg-teal-light corner-base py-10 px-12 mb-4")
                                                        if item.title
                                                            div(class="text-blue uppercase font-bold text-lg leading-8")= item.title
                                                        if item.intro
                                                            div(class="text-teal text-lg leading-8")= item.intro
                                                        if item.items
                                                            ul.list-disc.ml-5.mt-4.text-sm
                                                                each subitem in item.items
                                                                    li= subitem

                //- Discover our flexible modules
                section(id="modules" class="bg-white")
                    div(class="bg-teal text-white bg-vectors-teal-wide bg-cover bg-bottom")
                        div(id="modules-intro" class="max-w-6xl mx-auto px-4 pt-24 pb-32")
                            h2(class="text-3xl leading-12 overline overline-white mt-4 mb-2")= discover_modules.title
                            p(class="text-white text-xl leading-11")= discover_modules.intro
                    //- Levels
                    for level, i in collections.levels
                        if level.modules && level.modules.length > 0
                            div(class="pt-24 pb-32 bg-teal-gradient-"+(i+1))
                                div(class="max-w-6xl mx-auto px-4 py-4")
                                    //- Level
                                    h2(class="text-3xl text-blue") #{level.title} Level
                                    p(class="text-teal text-xl leading-11 mb-8")= level.summary
                                    - let gridCols = level.modules.length <= 2 ? 2 : 4
                                    ul(class="corner-base grid gap-4 grid-cols-1 md:grid-cols-"+(gridCols/2) + " lg:grid-cols-"+gridCols)
                                        for mod, j in level.modules
                                            //- Module
                                            li(class="bg-white" x-data="{ open: false }")
                                                div(class="bg-vectors-teal-square bg-imgcover text-center")
                                                    img(class="mx-auto" src='media'+mod.icon alt=mod.title)
                                                div(class="px-6 py-8")
                                                    div(class="text-blue font-bold mb-5 leading-6")= mod.title
                                                    div.text-sm.leading-6.mb-4= mod.summary
                                                    div.font-bold.uppercase.-ml-2.cursor-pointer: a(class="icon-arrow-right" @click="open = true") Details
                                                    //- Overlay
                                                    div(id="overlay-module-"+j class="fixed min-w-3xl inset-0 p-4 bg-grey" x-show="open" @click.away="open = false" style="display:none")
                                                        div(class="bg-white shadow-2xl w-full h-full overflow-scroll")
                                                            //- Close Button
                                                            button(@click="open = false" class="fixed right-0 top-0 mr-12 mt-12 icon-cancel text-teal text-3xl bg-white hover:text-blue")
                                                            div(class="max-w-2xl mx-auto px-4 py-24")
                                                                //- Module Title/Intro/Summary/Register Button
                                                                h3(class="font-bold text-3xl text-blue mt-12") #{mod.title} (#{level.title} Level)
                                                                div.text-teal.text-xl.leading-11.mb-8= mod.summary
                                                                div.markdown
                                                                    != marked(mod.desc, {gfm: true, breaks: true})
                                                                if mod.registerUrl
                                                                    div.text-center
                                                                        a(href=mod.registerUrl target="_blank" class="mt-12 button bg-teal text-white hover:bg-blue hover:text-white") Register now
                                                                //- Course Content
                                                                h4(class="mb-4 mt-24 font-bold text-3xl text-blue overline overline-blue")= modules.course_content
                                                                div.markdown
                                                                    != marked(mod.contents, {gfm: true, breaks: true})
                                                            //- Recommended Knowledge
                                                            div(class="bg-teal-gradient-2")
                                                                div(class="max-w-2xl mx-auto px-4 py-24")
                                                                    h3(class="my-4 font-bold text-3xl text-blue mt-12 overline overline-blue")= modules.recommended_knowledge
                                                                    div.text-teal.text-xl.leading-11.mb-8= mod.recommendedKnowledge ? mod.recommendedKnowledge : modules.no_prior_knowledge
                                                            //- Dates & Registration
                                                            if modules.dates
                                                                div(class="bg-vectors-teal text-white px-4 py-24 bg-imgcover")
                                                                    div(class="max-w-2xl mx-auto px-4")
                                                                        h3(class="font-bold text-3xl my-4 overline overline-white")= modules.dates
                                                                        div.markdown 
                                                                            != marked(mod.dates, {gfm: true, breaks: true})
                                                                        if mod.registerUrl
                                                                            div
                                                                                a(href=mod.registerUrl target="_blank" class="button button-white mt-12") Register now
                                                                        else
                                                                            div.markdown
                                                                                != marked(modules.no_registration, {gfm: true, breaks: true})
                                                            - let moduleContacts = filter(collections.contacts, {name: mod.contacts})
                                                            - if (moduleContacts.length == 0) {moduleContacts = filter(collections.contacts, {name: 'Beate Brede'})}
                                                            - let moduleContact = moduleContacts.length == 1 ? moduleContacts[0] : false
                                                            //- Contact
                                                            div.bg-vectors.bg-bottom
                                                                div(class="max-w-2xl mx-auto px-4 py-24")
                                                                    h3(class="text-3xl leading-12 text-blue overline overline-blue my-4 mb-2")= contact.title
                                                                    p(class="text-teal text-xl leading-11 mb-12")= contact.intro
                                                                    div.corner-lg.bg-teal-lighter.p-12
                                                                        div.font-bold.text-blue= contact.person.name
                                                                        if contact.person.role
                                                                            div.text-teal= contact.person.role
                                                                        if contact.person.address
                                                                            div.mb-4!= marked(contact.person.address, {gfm: true, breaks: true})
                                                                        if contact.person.phone
                                                                            div= contact.person.phone
                                                                        if contact.person.email
                                                                            div: a(href='mailto:'+contact.person.email target="_blank" class="")= contact.person.email
                                                                        if contact.person.contactUrl
                                                                            div: a(href=contact.person.contactUrl target="_blank" class="")= contact.send_email

                //- Contact
                section(id="contact" class="px-4 py-32 bg-vectors bg-bottom")
                    div(class="max-w-6xl mx-auto")
                        h2(class="text-3xl leading-12 mt-4 mb-2 text-blue overline overline-blue")= contact.title
                        p(class="text-teal text-xl leading-11 mb-12")= contact.intro
                        div(class="bg-teal-lighter px-12 py-12 corner-lg")
                            div(class="text-blue font-bold")= contact.person.name
                            if contact.person.title
                                div(class="text-teal")= contact.person.title
                            div(class="")
                                != marked(contact.person.address, {gfm: true, breaks: true})
                            div(class="mt-8")= contact.person.phone
                            div: a(href='mailto:'+contact.person.email)= contact.person.email

                //- Partners
                section(id="partners" class="bg-teal-gradient-1 px-4 py-32")
                    div(class="max-w-6xl mx-auto")
                        h2(class="text-3xl leading-12 text-blue overline overline-blue mb-8")= partners.title
                        ul(class="grid grid-cols-2 lg:grid-cols-4 gap-x-4 gap-y-5 corner-base lg:corner-lg")
                            for partner in partners.items
                                li: img(src=partner.logo alt=partner.name)
                        

            //- Footer
            footer.bg-blue.text-white.px-4.pt-12.pb-8
                div.max-w-6xl.mx-auto
                    div(class="sm:flex")
                        //- Contact
                        div(class="sm:w-1/2 md:w-1/3 lg:w-1/4")
                            h4.uppercase.mb-4= footer.contact
                            div #{site.provider}
                            div
                                - let href = `mailto:${site.email}`
                                a(href=href class="text-white hover:text-teal umami--click--footer-email") #{site.email}
                        //- Social Media
                        div(class="sm:w-1/2 md:w-1/3 lg:w-1/4 mt-8 sm:mt-0")
                            h4.mb-4.uppercase= footer.connect
                            ul.list-none
                                each url, platform in site.links.social
                                    li.inline.text-2xl.-ml-1.mr-3
                                        - let icon = `<span class="icon-${platform}"></span>`
                                        - let eventClass = 'umami--click--' + platform
                                        a(href=url target="_blank" rel="noopener" aria-label=platform class=eventClass + " text-white hover:text-teal") !{icon}
                    div(class='lg:flex flex-row-reverse justify-between items-end')
                        //- Logo
                        div(class="lg:w-1/4 py-8 sm:pt-8 sm:pb-12 lg:py-0")
                            a(href="https://eitrawmaterials.eu/eit-rm-academy/" target="_blank" rel="noopener")
                                img(src="/media/logo-eitrmacademy.svg" alt="EIT RawMaterials Academy")
                        //- Service Links
                        div#service-links
                            ul.font-bold.uppercase
                                li.inline-block
                                    a(href=site.links.privacy_policy target="_blank" rel="noopener" class="text-white hover:text-teal icon-arrow-right mr-8 umami--click--privacy") #{footer.privacy_policy}
                                li.inline-block
                                    a(href=site.links.imprint target="_blank" rel="noopener" class="text-white hover:text-teal icon-arrow-right mr-8 umami--click--imprint") #{footer.imprint}
